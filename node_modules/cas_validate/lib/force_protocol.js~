var parseUrl = require('url').parse
/**
 * force_protocol
 *
 * this function will force all host end points to have https protocol
 * If you are running CAS behind http, too bad for you
 *
 */
function force_protocol(cas_host) {
    return function(url){
        // if the given url string doesn't include a protocol (e.g., http://)
        // assume it should be https://
        // if if does include http, then force it to be https
        if(url === undefined) return cas_host
        var urlp = parseUrl(url);
        var result = urlp.host === undefined || !urlp.host
                   ? 'https://'+urlp.href
                   : 'https://'+urlp.host
        // urlp.host takes care of funky ports too, but might not exist
        return result
    }
}
